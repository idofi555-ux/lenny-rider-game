<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Lenny's Rider</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #1a0a2e;
      font-family: Arial, sans-serif;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }

    #menu {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, #0a0a2e, #1a0a2e);
    }

    #menu.hidden { display: none; }

    h1 {
      color: #00ffff;
      font-size: 2.5em;
      margin-bottom: 20px;
      text-shadow: 0 0 20px #00ffff;
    }

    .btn {
      background: #00ff00;
      color: #003300;
      border: none;
      padding: 25px 80px;
      font-size: 28px;
      font-weight: bold;
      border-radius: 50px;
      margin: 15px;
      cursor: pointer;
      -webkit-appearance: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      user-select: none;
      -webkit-user-select: none;
    }

    .btn:active {
      background: #00cc00;
      transform: scale(0.95);
    }

    #game {
      display: none;
      width: 100%;
      height: 100%;
    }

    #game.active { display: block; }

    canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    #jump {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: #00ff00;
      color: #003300;
      border: 4px solid #00cc00;
      font-size: 20px;
      font-weight: bold;
      display: none;
      cursor: pointer;
      -webkit-appearance: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      user-select: none;
      -webkit-user-select: none;
      z-index: 1000;
    }

    #jump.active { display: block; }

    #score {
      position: fixed;
      top: 20px;
      left: 20px;
      color: #00ffff;
      font-size: 24px;
      font-weight: bold;
      display: none;
    }

    #score.active { display: block; }
  </style>
</head>
<body>

<div id="menu">
  <h1>üèéÔ∏è Lenny's Rider</h1>
  <button class="btn" id="playBtn">‚ñ∂ PLAY</button>
  <button class="btn" id="garageBtn" style="background:#00ffff;color:#003">üöó GARAGE</button>
</div>

<div id="game">
  <canvas id="canvas"></canvas>
</div>

<button id="jump">JUMP</button>
<div id="score">Score: <span id="scoreNum">0</span></div>

<script>
// Simple game for Lenny
var menu = document.getElementById('menu');
var game = document.getElementById('game');
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var jumpBtn = document.getElementById('jump');
var scoreEl = document.getElementById('score');
var scoreNum = document.getElementById('scoreNum');
var playBtn = document.getElementById('playBtn');
var garageBtn = document.getElementById('garageBtn');

var playing = false;
var score = 0;
var car = { x: 150, y: 300, vy: 0, onGround: true };
var speed = 5;
var cameraX = 0;
var track = [];
var coins = [];
var holding = false;

// Generate track
function makeTrack() {
  track = [];
  coins = [];
  var x = -100;
  var y = 400;
  for (var i = 0; i < 500; i++) {
    // Randomly vary height
    if (i > 10 && Math.random() < 0.1) {
      y = y + (Math.random() - 0.5) * 80;
      if (y < 200) y = 200;
      if (y > 500) y = 500;
    }
    track.push({ x: x, y: y });
    // Add coins
    if (Math.random() < 0.15) {
      coins.push({ x: x, y: y - 60, got: false });
    }
    x += 100;
  }
}

function getGround(px) {
  for (var i = 0; i < track.length - 1; i++) {
    if (px >= track[i].x && px < track[i + 1].x) {
      return track[i].y;
    }
  }
  return 600;
}

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

function startGame() {
  menu.className = 'hidden';
  game.className = 'active';
  jumpBtn.className = 'active';
  scoreEl.className = 'active';

  resize();
  makeTrack();

  car.x = 150;
  car.y = getGround(150) - 20;
  car.vy = 0;
  car.onGround = true;
  speed = 5;
  score = 0;
  cameraX = 0;
  playing = true;

  loop();
}

function jump() {
  if (car.onGround) {
    car.vy = -15;
    car.onGround = false;
  }
}

function loop() {
  if (!playing) return;

  // Physics
  car.vy += 0.5; // gravity
  car.y += car.vy;

  // Accelerate when holding
  if (holding) {
    speed = Math.min(speed + 0.1, 20);
  }

  car.x += speed;
  cameraX = car.x - 200;

  // Ground collision
  var groundY = getGround(car.x);
  if (car.y >= groundY - 20) {
    car.y = groundY - 20;
    car.vy = 0;
    car.onGround = true;
  }

  // Collect coins
  for (var i = 0; i < coins.length; i++) {
    var c = coins[i];
    if (!c.got) {
      var dx = car.x - c.x;
      var dy = car.y - c.y;
      if (Math.sqrt(dx*dx + dy*dy) < 40) {
        c.got = true;
        score += 10;
      }
    }
  }

  // Score from distance
  score = Math.max(score, Math.floor(car.x / 50));
  scoreNum.textContent = score;

  // Draw
  ctx.fillStyle = '#1a0a2e';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.save();
  ctx.translate(-cameraX, 0);

  // Draw track
  ctx.strokeStyle = '#00ffff';
  ctx.lineWidth = 4;
  ctx.beginPath();
  for (var i = 0; i < track.length - 1; i++) {
    var t = track[i];
    var t2 = track[i + 1];
    if (t.x > cameraX - 100 && t.x < cameraX + canvas.width + 100) {
      ctx.moveTo(t.x, t.y);
      ctx.lineTo(t2.x, t2.y);
    }
  }
  ctx.stroke();

  // Draw coins
  ctx.fillStyle = '#ffcc00';
  for (var i = 0; i < coins.length; i++) {
    var c = coins[i];
    if (!c.got && c.x > cameraX - 50 && c.x < cameraX + canvas.width + 50) {
      ctx.beginPath();
      ctx.arc(c.x, c.y, 15, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  // Draw car
  ctx.fillStyle = '#00ffff';
  ctx.fillRect(car.x - 30, car.y - 15, 60, 20);
  ctx.fillStyle = '#00ff00';
  ctx.beginPath();
  ctx.arc(car.x - 15, car.y + 5, 10, 0, Math.PI * 2);
  ctx.arc(car.x + 15, car.y + 5, 10, 0, Math.PI * 2);
  ctx.fill();

  ctx.restore();

  requestAnimationFrame(loop);
}

// Helper for mobile-friendly button events
function addButtonEvent(btn, callback) {
  var handled = false;
  btn.addEventListener('touchstart', function(e) {
    e.preventDefault();
    e.stopPropagation();
    handled = true;
    callback();
  }, { passive: false });
  btn.addEventListener('click', function(e) {
    if (!handled) {
      callback();
    }
    handled = false;
  });
}

// Event listeners
addButtonEvent(playBtn, startGame);
addButtonEvent(garageBtn, function() { alert('All cars are FREE! Pick any color in the game!'); });

// Jump button - special handling
jumpBtn.addEventListener('touchstart', function(e) {
  e.preventDefault();
  e.stopPropagation();
  jump();
}, { passive: false });
jumpBtn.addEventListener('click', function(e) {
  jump();
});

// Touch events for acceleration (not on jump button)
document.body.addEventListener('touchstart', function(e) {
  if (playing && e.target !== jumpBtn && e.target !== playBtn && e.target !== garageBtn) {
    holding = true;
  }
}, { passive: true });
document.body.addEventListener('touchend', function() { holding = false; }, { passive: true });

// Mouse events
document.body.addEventListener('mousedown', function(e) {
  if (playing && e.target !== jumpBtn) {
    holding = true;
  }
});
document.body.addEventListener('mouseup', function() { holding = false; });

// Keyboard
document.onkeydown = function(e) {
  if (e.code === 'Space') {
    e.preventDefault();
    jump();
    holding = true;
  }
};
document.onkeyup = function(e) {
  if (e.code === 'Space') holding = false;
};

// Resize
window.onresize = resize;
</script>

</body>
</html>
